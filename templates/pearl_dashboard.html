<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Pearl Dashboard - Pearl Verse</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pearl_dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modular_sidenav.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modular_topnav.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modular_botnav.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/wallet_styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pearl_qr_styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile_header_update.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/battle_pass_styles.css') }}">
    
    <!-- Toast System -->
    {% include 'toast_system.html' %}
</head>
<body>
    <!-- Include Modular Side Navigation -->
    {% include 'modular_sidenav.html' %}
    
    <!-- Include Modular Top Navigation -->
    {% include 'modular_topnav.html' %}
    
    <!-- Include Modular Bottom Navigation -->
    {% include 'modular_botnav.html' %}
    
    <!-- Main Dashboard Content -->
    <main class="dashboard-main">
        <!-- Profile Header with Banner and Avatar -->
        <div class="profile-header">
                <!-- Profile Banner -->
                <div class="profile-banner">
                    <div class="banner-overlay"></div>
                    
                    <!-- Avatar Container (centered on banner) -->
                    <div class="avatar-container">
                        <div class="avatar-wrapper">
                            <div id="dashboard-avatar-preview" class="profile-avatar-preview">
                                <!-- Avatar layers will be dynamically generated by JavaScript -->
                                <div class="default-avatar-display">
                                    <div class="avatar-layer" data-layer="banner"></div>
                                    <div class="avatar-layer" data-layer="head">
                                        <img src="/static/img/avatar/head/head1.png" alt="Default Head" />
                                    </div>
                                    <div class="avatar-layer" data-layer="eyes">
                                        <img src="/static/img/avatar/eyes/eyes1.png" alt="Default Eyes" />
                                    </div>
                                    <div class="avatar-layer" data-layer="mouth">
                                        <img src="/static/img/avatar/mouth/mouth1.png" alt="Default Mouth" />
                                    </div>
                                    <div class="avatar-layer" data-layer="hat"></div>
                                    <div class="avatar-layer" data-layer="effect"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Decoration overlay positioned above entire avatar container -->
                    <div class="avatar-decoration-overlay">
                        <div class="avatar-layer" data-layer="decoration"></div>
                    </div>
                </div>
                
                <!-- Profile Info Section -->
                <div class="profile-info">
                    <div class="profile-details">
                        <h1 class="profile-name">
                            <span id="display-name">Loading...</span>
                        </h1>
                        <p class="profile-bio" id="profile-bio">Welcome to my Pearl Verse profile!</p>
                        
                        <!-- Main Profile Stats (Level, Followers, Following) -->
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="level">1</span>
                                <span class="stat-label">Level</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="followers-count">0</span>
                                <span class="stat-label">Followers</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="following-count">0</span>
                                <span class="stat-label">Following</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Tabs -->
            <div class="profile-tabs">
                <nav class="tab-navigation">
                    <button class="tab-btn active" data-tab="wallet">
                        <i class="fas fa-wallet"></i>
                        <span>Wallet</span>
                    </button>
                    <button class="tab-btn" data-tab="level">
                        <i class="fas fa-chart-line"></i>
                        <span>Level</span>
                    </button>
                    <button class="tab-btn" data-tab="info">
                        <i class="fas fa-info-circle"></i>
                        <span>Info</span>
                    </button>
                </nav>
            </div>
            
            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Wallet Tab -->
                <div class="tab-pane active" id="wallet-tab">
                    <!-- Wallet Dashboard Grid - Unique Layout -->
                    <div class="wallet-dashboard-container">
                        
                        <!-- Row 1: Wallet Actions and Referral Program -->
                        <div class="wallet-grid-row-1">
                            <!-- Wallet Actions Card -->
                            <div class="adaptive-card wallet-actions-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-wallet"></i> Wallet Actions</h3>
                                    <div class="balance-display">
                                        <span class="balance-amount" id="wallet-balance">1.2Qi</span>
                                        <span class="balance-label">PEARLS</span>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="wallet-address-section">
                                        <label>YOUR WALLET ADDRESS</label>
                                        <div class="address-display">
                                            <code id="wallet-address">pearl:0x38d4764e925d69ae6cf8...</code>
                                            <button class="copy-btn" data-copy="wallet-address" title="Copy Address">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="wallet-action-grid">
                                        <button class="action-btn send-btn" id="send-pearls-btn">
                                            <i class="fas fa-paper-plane"></i>
                                            <span>Send</span>
                                        </button>
                                        <button class="action-btn receive-btn" id="receive-pearls-btn">
                                            <i class="fas fa-download"></i>
                                            <span>Receive</span>
                                        </button>
                                        <button class="action-btn topup-btn" id="topup-pearls-btn">
                                            <i class="fas fa-plus"></i>
                                            <span>Top Up</span>
                                        </button>
                                        <button class="action-btn ads-btn" id="watch-ads-btn">
                                            <i class="fas fa-play"></i>
                                            <span>Watch Ads</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Referral Program Card -->
                            <div class="adaptive-card referral-program-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-users"></i> Referral Program</h3>
                                    <div class="referral-bonus">
                                        <span class="bonus-amount">1000</span>
                                        <span class="bonus-label">PEARLS PER REFERRAL</span>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="referral-stats-grid">
                                        <div class="referral-stat-item">
                                            <span class="stat-number" id="referral-count-wallet">1</span>
                                            <span class="stat-label">FRIENDS REFERRED</span>
                                        </div>
                                        <div class="referral-stat-item">
                                            <span class="stat-number" id="referral-earnings">1,000</span>
                                            <span class="stat-label">PEARLS EARNED</span>
                                        </div>
                                    </div>
                                    <div class="referral-code-section">
                                        <label>Your Referral Code</label>
                                        <div class="referral-code-display">
                                            <code id="referral-code-wallet">FJ141P91</code>
                                            <button class="copy-btn" data-copy="referral-code-wallet" title="Copy Referral Code">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <button class="share-referral-btn" id="share-referral-btn">
                                        <i class="fas fa-share-alt"></i>
                                        Share Referral Link
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row 2: Daily Claim Rewards -->
                        <div class="wallet-grid-row-2">
                            <div class="adaptive-card daily-claim-rewards-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-calendar-check"></i> Daily Claim Rewards</h3>
                                    <div class="streak-info">
                                        <span class="streak-number" id="current-streak">2</span>
                                        <span class="streak-label">Day Streak</span>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="daily-claim-grid" id="daily-claim-grid">
                                        <!-- 7-day claim buttons will be generated by JavaScript -->
                                        <div class="loading-claims">
                                            <i class="fas fa-spinner fa-spin"></i>
                                            <p>Loading daily claim status...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row 3: Transaction History -->
                        <div class="wallet-grid-row-3">
                            <div class="adaptive-card transaction-history-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-history"></i> Transaction History</h3>
                                    <div class="transaction-filters">
                                        <select id="transaction-filter" class="filter-select">
                                            <option value="all">All Transactions</option>
                                            <option value="send">Sent</option>
                                            <option value="receive">Received</option>
                                            <option value="daily_claim">Daily Claims</option>
                                            <option value="referral">Referrals</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="transaction-list" id="transaction-list">
                                        <div class="loading-transactions">
                                            <i class="fas fa-spinner fa-spin"></i>
                                            <p>Loading transaction history...</p>
                                        </div>
                                    </div>
                                    <div class="load-more-section">
                                        <button class="load-more-btn" id="load-more-transactions">
                                            Load More Transactions
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <!-- Level Tab - Battle Pass Style -->
                <div class="tab-pane" id="level-tab">
                    <div class="level-content" id="level-content">
                        <!-- Battle Pass content will be dynamically generated by JavaScript -->
                        <div class="loading-posts" style="padding: 40px; text-align: center;">
                            <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 12px;"></i>
                            <p>Loading Battle Pass...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Info Tab -->
                <div class="tab-pane" id="info-tab">
                    <div class="info-dashboard-container">
                        
                        <!-- Row 1: Personal Information and Active Socials -->
                        <div class="info-grid-row-1">
                            <!-- Personal Information Card -->
                            <div class="adaptive-card personal-info-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-user"></i> Personal Information</h3>
                                </div>
                                <div class="card-content">
                                    <div class="adaptive-info-list">
                                        <div class="info-item">
                                            <label>Username</label>
                                            <span id="info-username">@username</span>
                                        </div>
                                        <div class="info-item">
                                            <label>Email</label>
                                            <span id="info-email">email@example.com</span>
                                        </div>
                                        <div class="info-item">
                                            <label>Birthday</label>
                                            <span id="info-birthday">Not Provided</span>
                                        </div>
                                        <div class="info-item">
                                            <label>Member Since</label>
                                            <span id="info-member-since">Loading...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Active Socials Card -->
                            <div class="adaptive-card active-socials-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-users"></i> Active Socials</h3>
                                </div>
                                <div class="card-content">
                                    <div class="adaptive-socials-grid" id="active-socials">
                                        <!-- Content will be loaded by JavaScript -->
                                        <div class="loading-socials">
                                            <i class="fas fa-spinner fa-spin"></i>
                                            <p>Loading social platforms...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row 2: Card Showcase -->
                        <div class="info-grid-row-2">
                            <div class="adaptive-card card-showcase-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-star"></i> Card Showcase</h3>
                                    <button class="edit-showcase-btn" id="edit-card-showcase-btn">
                                        <i class="fas fa-cog"></i>
                                        Manage Cards
                                    </button>
                                </div>
                                <div class="card-content">
                                    <div class="card-showcase-grid" id="card-showcase-grid">
                                        <div class="showcase-slot empty" data-slot="1">
                                            <i class="fas fa-plus"></i>
                                            <span>Add Card</span>
                                        </div>
                                        <div class="showcase-slot empty" data-slot="2">
                                            <i class="fas fa-plus"></i>
                                            <span>Add Card</span>
                                        </div>
                                        <div class="showcase-slot empty" data-slot="3">
                                            <i class="fas fa-plus"></i>
                                            <span>Add Card</span>
                                        </div>
                                        <div class="showcase-slot empty" data-slot="4">
                                            <i class="fas fa-plus"></i>
                                            <span>Add Card</span>
                                        </div>
                                        <div class="showcase-slot empty" data-slot="5">
                                            <i class="fas fa-plus"></i>
                                            <span>Add Card</span>
                                        </div>
                                        <div class="showcase-slot empty" data-slot="6">
                                            <i class="fas fa-plus"></i>
                                            <span>Add Card</span>
                                        </div>
                                    </div>
                                    <p class="card-showcase-description">
                                        Display your 6 favorite cards from the shop for others to see!
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row 3: Badge Showcase -->
                        <div class="info-grid-row-3">
                            <div class="adaptive-card badge-showcase-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-trophy"></i> Badge Showcase</h3>
                                    <button class="edit-showcase-btn" id="edit-badge-showcase-btn">
                                        <i class="fas fa-cog"></i>
                                        Manage Badges
                                    </button>
                                </div>
                                <div class="card-content">
                                    <div class="badge-showcase-grid" id="badge-showcase-grid">
                                        <div class="badge-slot locked" data-badge="1">
                                            <i class="fas fa-lock"></i>
                                            <span>Locked</span>
                                        </div>
                                        <div class="badge-slot locked" data-badge="2">
                                            <i class="fas fa-lock"></i>
                                            <span>Locked</span>
                                        </div>
                                        <div class="badge-slot locked" data-badge="3">
                                            <i class="fas fa-lock"></i>
                                            <span>Locked</span>
                                        </div>
                                        <div class="badge-slot locked" data-badge="4">
                                            <i class="fas fa-lock"></i>
                                            <span>Locked</span>
                                        </div>
                                        <div class="badge-slot locked" data-badge="5">
                                            <i class="fas fa-lock"></i>
                                            <span>Locked</span>
                                        </div>
                                        <div class="badge-slot locked" data-badge="6">
                                            <i class="fas fa-lock"></i>
                                            <span>Locked</span>
                                        </div>
                                    </div>
                                    <p class="badge-showcase-description">
                                        Complete challenges to unlock badges and show off your achievements!
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
    </main>
    
    <!-- Send Pearls Modal -->
    <div id="send-pearls-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-paper-plane"></i> Send Pearls</h3>
                <button class="close-modal" id="close-send-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="send-pearls-form">
                    <!-- Recipient Address Section -->
                    <div class="form-group">
                        <label for="recipient-address">Recipient Wallet Address</label>
                        <div class="address-input-container">
                            <input type="text" id="recipient-address" class="form-input" placeholder="pearl:0x..." required>
                            <button type="button" class="qr-scan-btn" id="scan-qr-btn" title="Scan QR Code">
                                <i class="fas fa-qrcode"></i>
                            </button>
                        </div>
                        <div class="input-help">
                            Enter a valid Pearl wallet address or scan a QR code
                        </div>
                    </div>
                    
                    <!-- Amount Section -->
                    <div class="form-group">
                        <label for="send-amount">Amount (Pearls)</label>
                        <div class="amount-input-container">
                            <input type="number" id="send-amount" class="form-input" placeholder="0" min="1" step="1" required>
                            <div class="amount-actions">
                                <button type="button" class="amount-btn" data-percentage="25">25%</button>
                                <button type="button" class="amount-btn" data-percentage="50">50%</button>
                                <button type="button" class="amount-btn" data-percentage="75">75%</button>
                                <button type="button" class="amount-btn" data-percentage="100">Max</button>
                            </div>
                        </div>
                        <div class="balance-info">
                            Available Balance: <span id="modal-balance">0</span> Pearls
                        </div>
                    </div>
                    
                    <!-- Transaction Summary -->
                    <div class="transaction-summary">
                        <div class="summary-row total">
                            <span>Amount to Send:</span>
                            <span id="summary-amount">0 Pearls</span>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-send-btn">
                            <i class="fas fa-times"></i>
                            Cancel
                        </button>
                        <button type="submit" class="btn btn-primary" id="confirm-send-btn">
                            <i class="fas fa-paper-plane"></i>
                            Send Pearls
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Receive Pearls Modal -->
    <div id="receive-pearls-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-download"></i> Receive Pearls</h3>
                <button class="close-modal" id="close-receive-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="receive-content">
                    <!-- QR Code Section -->
                    <div class="qr-section">
                        <label>QR Code</label>
                        <div class="qr-container">
                            <div class="qr-display pearl-qr-display">
                                <div id="qr-loading" class="qr-loading">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p>Generating beautiful QR code...</p>
                                </div>
                                <div id="receive-qr-code"></div>
                            </div>
                        </div>
                        <div class="qr-help">
                            Others can scan this rainbow QR code to send you Pearls ✨
                        </div>
                    </div>
                    
                    <!-- QR Actions -->
                    <div class="qr-actions">
                        <button class="btn btn-secondary" id="download-qr-btn">
                            <i class="fas fa-download"></i>
                            Download QR
                        </button>
                        <button class="btn btn-secondary" id="copy-qr-btn">
                            <i class="fas fa-copy"></i>
                            Copy QR
                        </button>
                        <button class="btn btn-secondary" id="share-qr-btn">
                            <i class="fas fa-share"></i>
                            Share QR
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    
    <!-- Scripts -->
    <!-- jQuery Library -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    
    <!-- Bootstrap JS Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    
    <!-- QR Code Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    
    <!-- Application Scripts -->
    <script src="{{ url_for('static', filename='js/toast.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modular_sidenav.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modular_topnav.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modular_botnav.js') }}"></script>
    <script src="{{ url_for('static', filename='js/qr-generator.js') }}"></script>
    <script src="{{ url_for('static', filename='js/pearl_dashboard.js') }}"></script>
</body>
</html>
