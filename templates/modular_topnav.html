<!-- Modern Flat Design Top Navigation - Pearl Verse -->
<!-- Inter Font - Modern, clean, and highly readable -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERwTkw==" crossorigin="anonymous">

<style>
    /* Global font settings for topnav with enhanced readability */
    .topnav, .topnav *, .dropdown-menu, .dropdown-menu * {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        font-variant-numeric: tabular-nums;
        font-feature-settings: "cv02", "cv03", "cv04", "cv11";
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-optical-sizing: auto;
    }
    
    /* Enhanced typography hierarchy */
    .search-input {
        font-size: 0.9375rem; /* 15px */
        font-weight: 400;
        line-height: 1.6;
        letter-spacing: -0.01em;
    }
    
    .search-input::placeholder {
        font-weight: 400;
        opacity: 0.65;
        color: #64748b;
    }
    
    .nav-action-btn {
        font-size: 1.125rem; /* 18px */
        font-weight: 500;
        line-height: 1;
    }
    
    .dropdown-header h3 {
        font-size: 1.125rem; /* 18px */
        font-weight: 700;
        letter-spacing: -0.025em;
        line-height: 1.3;
    }
    
    .notification-title {
        font-size: 0.875rem; /* 14px */
        font-weight: 600;
        line-height: 1.5;
        letter-spacing: -0.01em;
    }
    
    .notification-text {
        font-size: 0.8125rem; /* 13px */
        font-weight: 400;
        line-height: 1.5;
        letter-spacing: 0;
    }
    
    .notification-time {
        font-size: 0.75rem; /* 12px */
        font-weight: 500;
        opacity: 0.7;
        letter-spacing: 0.01em;
    }
    
    /* Profile styles for all screen sizes - compact spacing */
    .profile-name {
        font-size: 1rem !important;
        font-weight: 600 !important;
        color: #f8fafc !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        text-align: left !important;
        margin: 0 !important;
        padding: 0 !important;
        line-height: 1.2 !important;
    }
    
    .profile-username {
        font-size: 0.875rem !important;
        font-weight: 500 !important;
        color: #06b6d4 !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        text-align: left !important;
        margin: 0 !important;
        padding: 0 !important;
        line-height: 1.2 !important;
    }
    
    .profile-email {
        font-size: 0.75rem !important;
        font-weight: 400 !important;
        color: #94a3b8 !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        text-align: left !important;
        margin: 0 !important;
        padding: 0 !important;
        line-height: 1.2 !important;
    }
    
    .profile-details {
        text-align: left !important;
        align-items: flex-start !important;
        gap: 0.125rem !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    .profile-info {
        padding: 0.625rem 1rem !important;
        margin: 0 !important;
    }
    
    .dropdown-item {
        font-size: 0.875rem; /* 14px */
        font-weight: 500;
        line-height: 1.5;
        letter-spacing: -0.005em;
    }
    
    /* Enhanced button typography */
    .mark-all-read, .compose-btn {
        font-size: 0.8125rem; /* 13px */
        font-weight: 600;
        letter-spacing: 0.01em;
    }
    
    .view-all-link {
        font-size: 0.875rem; /* 14px */
        font-weight: 600;
        letter-spacing: 0.01em;
    }
    
    /* Responsive typography with better scaling */
    @media (max-width: 768px) {
        .search-input {
            font-size: 0.875rem; /* 14px */
        }
        
        .nav-action-btn {
            font-size: 1.0625rem; /* 17px */
        }
        
        .dropdown-header h3 {
            font-size: 1rem; /* 16px */
        }
        
        .notification-title {
            font-size: 0.8125rem; /* 13px */
        }
        
        .profile-name {
            font-size: 1rem; /* 16px */
        }
        
        .profile-username {
            font-size: 1rem; /* 16px */
        }
        
        .dropdown-item {
            font-size: 0.8125rem; /* 13px */
        }
    }
    
    @media (max-width: 480px) {
        .search-input {
            font-size: 0.8125rem; /* 13px */
        }
        
        .nav-action-btn {
            font-size: 1rem; /* 16px */
        }
        
        .notification-title {
            font-size: 0.75rem; /* 12px */
        }
        
        .notification-text {
            font-size: 0.75rem; /* 12px */
        }
        
        .dropdown-item {
            font-size: 0.75rem; /* 12px */
        }
    }
    
    /* Extra small screens optimization */
    @media (max-width: 360px) {
        .search-input {
            font-size: 0.75rem; /* 12px */
        }
        
        .notification-title, .notification-text {
            font-size: 0.6875rem; /* 11px */
        }
    }
</style>
<header class="topnav" id="topnav">
    <div class="topnav-container">
        <!-- Left Section - Search -->
        <div class="topnav-left">
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-magnifying-glass search-icon" aria-hidden="true"></i>
                    <input 
                        type="search" 
                        class="search-input" 
                        placeholder="Search pearls, items, players..."
                        id="globalSearch"
                        autocomplete="off"
                        role="searchbox"
                        aria-label="Search pearls, items, and players"
                        spellcheck="false"
                    >
                    <button class="search-clear" id="searchClear" style="display: none;" aria-label="Clear search">
                        <i class="fas fa-xmark" aria-hidden="true"></i>
                    </button>
                </div>
                <!-- Search Results Dropdown -->
                <div class="search-results" id="searchResults">
                    <div class="search-category">
                        <div class="search-category-title">Recent Searches</div>
                        <div class="search-item" role="button" tabindex="0">
                            <i class="fas fa-clock-rotate-left" aria-hidden="true"></i>
                            <span>rare pearls</span>
                        </div>
                        <div class="search-item" role="button" tabindex="0">
                            <i class="fas fa-clock-rotate-left" aria-hidden="true"></i>
                            <span>avatar accessories</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Right Section - Actions -->
        <div class="topnav-right">
            <!-- Notifications -->
            <div class="nav-action-item dropdown" data-dropdown="notifications">
                <button class="nav-action-btn" aria-label="Notifications" aria-expanded="false" aria-haspopup="true">
                    <i class="fas fa-bell" aria-hidden="true"></i>
                    <span class="notification-badge" id="notificationCount" aria-label="3 unread notifications">3</span>
                </button>
                <div class="dropdown-menu notifications-dropdown" role="menu" aria-label="Notifications menu">
                    <div class="dropdown-header">
                        <h3 id="notifications-heading">Notifications</h3>
                        <button class="mark-all-read" aria-label="Mark all notifications as read">
                            <i class="fas fa-check-double" aria-hidden="true"></i>
                            Mark all read
                        </button>
                    </div>
                    <div class="dropdown-content">
                        <div class="notification-item unread" role="menuitem" tabindex="0">
                            <div class="notification-icon pearl-discovery">
                                <i class="fas fa-gem" aria-hidden="true"></i>
                            </div>
                            <div class="notification-content">
                                <div class="notification-title">New Pearl Discovered!</div>
                                <div class="notification-text">You found a rare Azure Pearl</div>
                                <div class="notification-time">2 minutes ago</div>
                            </div>
                        </div>
                        <div class="notification-item unread" role="menuitem" tabindex="0">
                            <div class="notification-icon achievement">
                                <i class="fas fa-trophy" aria-hidden="true"></i>
                            </div>
                            <div class="notification-content">
                                <div class="notification-title">Achievement Unlocked</div>
                                <div class="notification-text">Pearl Collector - Level 1</div>
                                <div class="notification-time">1 hour ago</div>
                            </div>
                        </div>
                        <div class="notification-item" role="menuitem" tabindex="0">
                            <div class="notification-icon social">
                                <i class="fas fa-user-plus" aria-hidden="true"></i>
                            </div>
                            <div class="notification-content">
                                <div class="notification-title">Friend Request</div>
                                <div class="notification-text">Pearl_Hunter wants to be friends</div>
                                <div class="notification-time">3 hours ago</div>
                            </div>
                        </div>
                    </div>
                    <div class="dropdown-footer">
                        <a href="/notifications" class="view-all-link">View all notifications</a>
                    </div>
                </div>
            </div>
            
            <!-- Messages -->
            <div class="nav-action-item dropdown" data-dropdown="messages">
                <button class="nav-action-btn" aria-label="Messages" aria-expanded="false" aria-haspopup="true">
                    <i class="fas fa-message" aria-hidden="true"></i>
                    <span class="notification-badge" id="messageCount" aria-label="1 unread message">1</span>
                </button>
                <div class="dropdown-menu messages-dropdown" role="menu" aria-label="Messages menu">
                    <div class="dropdown-header">
                        <h3 id="messages-heading">Messages</h3>
                        <button class="compose-btn" aria-label="Compose new message">
                            <i class="fas fa-plus" aria-hidden="true"></i>
                        </button>
                    </div>
                    <div class="dropdown-content">
                        <div class="message-item unread" role="menuitem" tabindex="0">
                            <div class="message-avatar">
                                <img src="/static/images/avatar-placeholder.png" alt="Pearl_Master avatar" onerror="this.outerHTML='<div class=&quot;message-avatar-fallback&quot;><i class=&quot;fas fa-user-circle&quot; aria-hidden=&quot;true&quot;></i></div>'">
                            </div>
                            <div class="message-content">
                                <div class="message-sender">Pearl_Master</div>
                                <div class="message-text">Hey! Want to trade some rare pearls?</div>
                                <div class="message-time">5 minutes ago</div>
                            </div>
                        </div>
                    </div>
                    <div class="dropdown-footer">
                        <a href="/messages" class="view-all-link">View all messages</a>
                    </div>
                </div>
            </div>
            
            <!-- Profile -->
            <div class="nav-action-item dropdown profile-dropdown" data-dropdown="profile">
                <button class="nav-action-btn profile-btn" aria-label="Profile menu" aria-expanded="false" aria-haspopup="true">
                    <div class="profile-avatar">
                        <img src="/static/images/profile-placeholder.png" alt="Player profile avatar" onerror="this.outerHTML='<div class=&quot;profile-avatar-fallback&quot;><i class=&quot;fas fa-user-circle&quot; aria-hidden=&quot;true&quot;></i></div>'">
                    </div>
                    <i class="fas fa-chevron-down profile-arrow" aria-hidden="true"></i>
                </button>
                <div class="dropdown-menu profile-menu" role="menu" aria-label="Profile menu">
                    <div class="profile-info" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
                        <div class="profile-details" style="display: flex !important; flex-direction: column !important; gap: 0.125rem !important; margin: 0 !important; padding: 0 !important; text-align: left !important; align-items: flex-start !important;">
                            <div class="profile-username" id="topnavProfileUsername" style="display: block !important; visibility: visible !important; opacity: 1 !important; color: #06b6d4 !important; font-size: 0.875rem !important; font-weight: 500 !important; margin: 0 !important; padding: 0 !important; line-height: 1.2 !important; text-align: left !important;">@ginotorralba</div>
                            <div class="profile-email" id="topnavProfileEmail" style="display: block !important; visibility: visible !important; opacity: 1 !important; color: #94a3b8 !important; font-size: 0.75rem !important; font-weight: 400 !important; margin: 0 !important; padding: 0 !important; line-height: 1.2 !important; text-align: left !important;">ginotorralba0031@gmail.com</div>
                        </div>
                    </div>
                    <div class="dropdown-content">
                        <a href="/pearl_settings" class="dropdown-item" role="menuitem">
                            <i class="fas fa-gear" aria-hidden="true"></i>
                            <span>Settings</span>
                        </a>
                        <div class="dropdown-divider" role="separator"></div>
                        <a href="/logout" class="dropdown-item logout-item" role="menuitem">
                            <i class="fas fa-arrow-right-from-bracket" aria-hidden="true"></i>
                            <span>Logout</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
